"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wxShareConfig(e,t,n,i){wx.config({debug:!1,appId:e,timestamp:t,nonceStr:n,signature:i,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareQZone"]}),wx.error(function(e){})}function wxShareReady(e,t,n,i){wx.ready(function(){wx.onMenuShareTimeline({title:t,link:e,imgUrl:i,success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:t,desc:n,link:e,imgUrl:i,type:"link",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareQQ({title:t,desc:n,link:e,imgUrl:i,success:function(){},cancel:function(){}}),wx.onMenuShareQZone({title:t,desc:n,link:e,imgUrl:i,success:function(){},cancel:function(){}}),wx.onMenuShareWeibo({title:t,desc:n,link:e,imgUrl:i,success:function(){},cancel:function(){}})})}function GetQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t),i="";return null!=n&&(i=n[2]),t=null,n=null,null==i||""==i||"undefined"==i?"":i}function $ajax(e,t,n,i){e=config.host+e;var r=arguments[2]?arguments[2]:function(){},a=arguments[3]?arguments[3]:function(){};$.ajax({url:e,type:"POST",dataType:"json",data:t,success:function(e){r(e)},error:function(e){a(e)}})}function getAjaxPromise(e){return new Promise(function(t,n){$.ajax({url:e.url,type:"post",data:e.data||"",success:function(e){t(e)},error:function(e){n(e)}})})}function GetQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t),i="";return null!=n&&(i=n[2]),t=null,n=null,null==i||""==i||"undefined"==i?"":i}function repTel(){var e=/^1[3|4|5|7|8][0-9]\d{8}$/,t=$("#tel").val();return""===t?(layer.open({content:"手机号不能为空",skin:"msg",time:2}),!1):(e.test(t)||layer.open({content:"手机号错误",skin:"msg",time:2}),e.test(t))}function addZero(e){return e<10?"0"+e:e}function count(){var e=$("#getcode").text(),t=parseInt(e),n=setInterval(function(){if(t<=0)return clearInterval(n),void $("#getcode").removeAttr("disabled").text("验证码").removeClass("get");t--,$("#getcode").text(addZero(t)+"s").addClass("get")},1e3)}function prefix(){var e=getCompStyle(document.documentElement),t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||["","o"])[1];return{dom:"WebKit|Moz|MS|O".match(new RegExp("("+t+")","i"))[1],lowercase:t,css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)}}function getCompStyle(e,t){return(window.getComputedStyle?window.getComputedStyle(e,t||null):e.currentStyle)||null}function handler(){event.preventDefault(),event.stopPropagation()}function hidden(e,t){e.removeClass("fadeInUp fadeOutDown").addClass("fadeOutDown");var n={webkit:"webkitAnimationEnd",o:"oAnimationEnd",ms:"MSAnimationEnd",animation:"animationend"},i=n[prefix().lowercase]||n.animation;i&&e[0].addEventListener(i,function e(){t&&t(i,e)})}function getWxConfig(e,t){$ajax("/free/getWeChatInfo",{url:e},function(e){if("1"===e.status){var n=e.result;wxShareConfig(n.appId,n.timestamp,n.nonceStr,n.signature),wxShareReady(t,config.shareTitle,config.shareContent,config.shareLogo)}})}!function(e,t){"function"==typeof define&&(define.amd||define.cmd)?define(function(){return t(e)}):t(e,!0)}(void 0,function(e,t){function n(t,n,i){e.WeixinJSBridge?WeixinJSBridge.invoke(t,r(n),function(e){s(t,e,i)}):l(t,i)}function i(t,n,i){e.WeixinJSBridge?WeixinJSBridge.on(t,function(e){i&&i.trigger&&i.trigger(e),s(t,e,n)}):i?l(t,i):l(t,n)}function r(e){return e=e||{},e.appId=E.appId,e.verifyAppId=E.appId,e.verifySignType="sha1",e.verifyTimestamp=E.timestamp+"",e.verifyNonceStr=E.nonceStr,e.verifySignature=E.signature,e}function a(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function o(e){return e.postalCode=e.addressPostalCode,delete e.addressPostalCode,e.provinceName=e.proviceFirstStageName,delete e.proviceFirstStageName,e.cityName=e.addressCitySecondStageName,delete e.addressCitySecondStageName,e.countryName=e.addressCountiesThirdStageName,delete e.addressCountiesThirdStageName,e.detailInfo=e.addressDetailInfo,delete e.addressDetailInfo,e}function s(e,t,n){"openEnterpriseChat"==e&&(t.errCode=t.err_code),delete t.err_code,delete t.err_desc,delete t.err_detail;var i=t.errMsg;i||(i=t.err_msg,delete t.err_msg,i=c(e,i),t.errMsg=i),n=n||{},n._complete&&(n._complete(t),delete n._complete),i=t.errMsg||"",E.debug&&!n.isInnerInvoke&&alert(JSON.stringify(t));var r=i.indexOf(":");switch(i.substring(r+1)){case"ok":n.success&&n.success(t);break;case"cancel":n.cancel&&n.cancel(t);break;default:n.fail&&n.fail(t)}n.complete&&n.complete(t)}function c(e,t){var n=e,i=y[n];i&&(n=i);var r="ok";if(t){var a=t.indexOf(":");r=t.substring(a+1),"confirm"==r&&(r="ok"),"failed"==r&&(r="fail"),-1!=r.indexOf("failed_")&&(r=r.substring(7)),-1!=r.indexOf("fail_")&&(r=r.substring(5)),r=r.replace(/_/g," "),r=r.toLowerCase(),("access denied"==r||"no permission to execute"==r)&&(r="permission denied"),"config"==n&&"function not exist"==r&&(r="ok"),""==r&&(r="fail")}return t=n+":"+r}function d(e){if(e){for(var t=0,n=e.length;n>t;++t){var i=e[t],r=g[i];r&&(e[t]=r)}return e}}function l(e,t){if(!(!E.debug||t&&t.isInnerInvoke)){var n=y[e];n&&(e=n),t&&t._complete&&delete t._complete}}function u(e){if(!(b||x||E.debug||"6.0.2">A||M.systemType<0)){var t=new Image;M.appId=E.appId,M.initTime=C.initEndTime-C.initStartTime,M.preVerifyTime=C.preVerifyEndTime-C.preVerifyStartTime,V.getNetworkType({isInnerInvoke:!0,success:function(e){M.networkType=e.networkType;var n="https://open.weixin.qq.com/sdk/report?v="+M.version+"&o="+M.isPreVerifyOk+"&s="+M.systemType+"&c="+M.clientVersion+"&a="+M.appId+"&n="+M.networkType+"&i="+M.initTime+"&p="+M.preVerifyTime+"&u="+M.url;t.src=n}})}}function p(){return(new Date).getTime()}function f(t){k&&(e.WeixinJSBridge?t():h.addEventListener&&h.addEventListener("WeixinJSBridgeReady",t,!1))}function m(){V.invoke||(V.invoke=function(t,n,i){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,r(n),i)},V.on=function(t,n){e.WeixinJSBridge&&WeixinJSBridge.on(t,n)})}if(!e.jWeixin){var v,g={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},y=function(){var e={};for(var t in g)e[g[t]]=t;return e}(),h=e.document,_=h.title,S=navigator.userAgent.toLowerCase(),w=navigator.platform.toLowerCase(),b=!(!w.match("mac")&&!w.match("win")),x=-1!=S.indexOf("wxdebugger"),k=-1!=S.indexOf("micromessenger"),I=-1!=S.indexOf("android"),T=-1!=S.indexOf("iphone")||-1!=S.indexOf("ipad"),A=function(){var e=S.match(/micromessenger\/(\d+\.\d+\.\d+)/)||S.match(/micromessenger\/(\d+\.\d+)/);return e?e[1]:""}(),C={initStartTime:p(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},M={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:T?1:I?2:-1,clientVersion:A,url:encodeURIComponent(location.href)},E={},L={_completes:[]},P={state:0,data:{}};f(function(){C.initEndTime=p()});var O=!1,N=[],V=(v={config:function(e){E=e,l("config",e);var t=!1!==E.check;f(function(){if(t)n(g.config,{verifyJsApiList:d(E.jsApiList)},function(){L._complete=function(e){C.preVerifyEndTime=p(),P.state=1,P.data=e},L.success=function(e){M.isPreVerifyOk=0},L.fail=function(e){L._fail?L._fail(e):P.state=-1};var e=L._completes;return e.push(function(){u()}),L.complete=function(t){for(var n=0,i=e.length;i>n;++n)e[n]();L._completes=[]},L}()),C.preVerifyStartTime=p();else{P.state=1;for(var e=L._completes,i=0,r=e.length;r>i;++i)e[i]();L._completes=[]}}),E.beta&&m()},ready:function(e){0!=P.state?e():(L._completes.push(e),!k&&E.debug&&e())},error:function(e){"6.0.2">A||(-1==P.state?e(P.data):L._fail=e)},checkJsApi:function(e){var t=function(e){var t=e.checkResult;for(var n in t){var i=y[n];i&&(t[i]=t[n],delete t[n])}return e};n("checkJsApi",{jsApiList:d(e.jsApiList)},function(){return e._complete=function(e){if(I){var n=e.checkResult;n&&(e.checkResult=JSON.parse(n))}e=t(e)},e}())},onMenuShareTimeline:function(e){i(g.onMenuShareTimeline,{complete:function(){n("shareTimeline",{title:e.title||_,desc:e.title||_,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(e){i(g.onMenuShareAppMessage,{complete:function(){n("sendAppMessage",{title:e.title||_,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){i(g.onMenuShareQQ,{complete:function(){n("shareQQ",{title:e.title||_,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){i(g.onMenuShareWeibo,{complete:function(){n("shareWeiboApp",{title:e.title||_,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){i(g.onMenuShareQZone,{complete:function(){n("shareQZone",{title:e.title||_,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},startRecord:function(e){n("startRecord",{},e)},stopRecord:function(e){n("stopRecord",{},e)},onVoiceRecordEnd:function(e){i("onVoiceRecordEnd",e)},playVoice:function(e){n("playVoice",{localId:e.localId},e)},pauseVoice:function(e){n("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){n("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){i("onVoicePlayEnd",e)},uploadVoice:function(e){n("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){n("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){n("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){n("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},function(){return e._complete=function(e){if(I){var t=e.localIds;t&&(e.localIds=JSON.parse(t))}},e}())},getLocation:function(e){},previewImage:function(e){n(g.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){n("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){n("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getLocalImgData:function(e){!1===O?(O=!0,n("getLocalImgData",{localId:e.localId},function(){return e._complete=function(e){if(O=!1,N.length>0){var t=N.shift();wx.getLocalImgData(t)}},e}())):N.push(e)},getNetworkType:function(e){var t=function(e){var t=e.errMsg;e.errMsg="getNetworkType:ok";var n=e.subtype;if(delete e.subtype,n)e.networkType=n;else{var i=t.indexOf(":"),r=t.substring(i+1);switch(r){case"wifi":case"edge":case"wwan":e.networkType=r;break;default:e.errMsg="getNetworkType:fail"}}return e};n("getNetworkType",{},function(){return e._complete=function(e){e=t(e)},e}())},openLocation:function(e){n("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)}},_defineProperty(v,"getLocation",function(e){e=e||{},n(g.getLocation,{type:e.type||"wgs84"},function(){return e._complete=function(e){delete e.type},e}())}),_defineProperty(v,"hideOptionMenu",function(e){n("hideOptionMenu",{},e)}),_defineProperty(v,"showOptionMenu",function(e){n("showOptionMenu",{},e)}),_defineProperty(v,"closeWindow",function(e){e=e||{},n("closeWindow",{},e)}),_defineProperty(v,"hideMenuItems",function(e){n("hideMenuItems",{menuList:e.menuList},e)}),_defineProperty(v,"showMenuItems",function(e){n("showMenuItems",{menuList:e.menuList},e)}),_defineProperty(v,"hideAllNonBaseMenuItem",function(e){n("hideAllNonBaseMenuItem",{},e)}),_defineProperty(v,"showAllNonBaseMenuItem",function(e){n("showAllNonBaseMenuItem",{},e)}),_defineProperty(v,"scanQRCode",function(e){e=e||{},n("scanQRCode",{needResult:e.needResult||0,scanType:e.scanType||["qrCode","barCode"]},function(){return e._complete=function(e){if(T){var t=e.resultStr;if(t){var n=JSON.parse(t);e.resultStr=n&&n.scan_code&&n.scan_code.scan_result}}},e}())}),_defineProperty(v,"openAddress",function(e){n(g.openAddress,{},function(){return e._complete=function(e){e=o(e)},e}())}),_defineProperty(v,"openProductSpecificView",function(e){n(g.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)}),_defineProperty(v,"addCard",function(e){for(var t=e.cardList,i=[],r=0,a=t.length;a>r;++r){var o=t[r],s={card_id:o.cardId,card_ext:o.cardExt};i.push(s)}n(g.addCard,{card_list:i},function(){return e._complete=function(e){var t=e.card_list;if(t){t=JSON.parse(t);for(var n=0,i=t.length;i>n;++n){var r=t[n];r.cardId=r.card_id,r.cardExt=r.card_ext,r.isSuccess=!!r.is_succ,delete r.card_id,delete r.card_ext,delete r.is_succ}e.cardList=t,delete e.card_list}},e}())}),_defineProperty(v,"chooseCard",function(e){n("chooseCard",{app_id:E.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},function(){return e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e}())}),_defineProperty(v,"openCard",function(e){for(var t=e.cardList,i=[],r=0,a=t.length;a>r;++r){var o=t[r],s={card_id:o.cardId,code:o.code};i.push(s)}n(g.openCard,{card_list:i},e)}),_defineProperty(v,"consumeAndShareCard",function(e){n(g.consumeAndShareCard,{consumedCardId:e.cardId,consumedCode:e.code},e)}),_defineProperty(v,"chooseWXPay",function(e){n(g.chooseWXPay,a(e),e)}),_defineProperty(v,"openEnterpriseRedPacket",function(e){n(g.openEnterpriseRedPacket,a(e),e)}),_defineProperty(v,"startSearchBeacons",function(e){n(g.startSearchBeacons,{ticket:e.ticket},e)}),_defineProperty(v,"stopSearchBeacons",function(e){n(g.stopSearchBeacons,{},e)}),_defineProperty(v,"onSearchBeacons",function(e){i(g.onSearchBeacons,e)}),_defineProperty(v,"openEnterpriseChat",function(e){n("openEnterpriseChat",{useridlist:e.userIds,chatname:e.groupName},e)}),v),D=1,$={};return h.addEventListener("error",function(e){if(!I){var t=e.target,n=t.tagName,i=t.src;if("IMG"==n||"VIDEO"==n||"AUDIO"==n||"SOURCE"==n){if(-1!=i.indexOf("wxlocalresource://")){e.preventDefault(),e.stopPropagation();var r=t["wx-id"];if(r||(r=D++,t["wx-id"]=r),$[r])return;$[r]=!0,wx.ready(function(){wx.getLocalImgData({localId:i,success:function(e){t.src=e.localData}})})}}}},!0),h.addEventListener("load",function(e){if(!I){var t=e.target,n=t.tagName;if(t.src,"IMG"==n||"VIDEO"==n||"AUDIO"==n||"SOURCE"==n){var i=t["wx-id"];i&&($[i]=!1)}}},!0),t&&(e.wx=e.jWeixin=V),V}});var config={host:"http://activity-server.dev.sanqimei.com",timeout:5e3,shareLogo:"https://static.sanqimei.com/images/logo/show.jpg",shareTitle:"双重福利免费领",shareContent:"凤凰机器人联合37美放大招！双重福利免费领！"},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t=document,n="getElementsByClassName",i=function(e){return t.querySelectorAll(e)},r={type:0,shade:!0,shadeClose:!0,fixed:!0,anim:"scale"},a={extend:function(e){var t=JSON.parse(JSON.stringify(r));for(var n in e)t[n]=e[n];return t},timer:{},end:{}};a.touch=function(e,t){e.addEventListener("click",function(e){t.call(this,e)},!1)};var o=0,s=["layui-m-layer"],c=function(e){var t=this;t.config=a.extend(e),t.view()};c.prototype.view=function(){var e=this,r=e.config,a=t.createElement("div");e.id=a.id=s[0]+o,a.setAttribute("class",s[0]+" "+s[0]+(r.type||0)),a.setAttribute("index",o);var c=function(){var e="object"===_typeof(r.title);return r.title?'<h3 style="'+(e?r.title[1]:"")+'">'+(e?r.title[0]:r.title)+"</h3>":""}(),d=function(){"string"==typeof r.btn&&(r.btn=[r.btn]);var e,t=(r.btn||[]).length;return 0!==t&&r.btn?(e='<span yes type="1">'+r.btn[0]+"</span>",2===t&&(e='<span no type="0">'+r.btn[1]+"</span>"+e),'<div class="layui-m-layerbtn">'+e+"</div>"):""}();if(r.fixed||(r.top=r.hasOwnProperty("top")?r.top:100,r.style=r.style||"",r.style+=" top:"+(t.body.scrollTop+r.top)+"px"),2===r.type&&(r.content='<i></i><i class="layui-m-layerload"></i><i></i><p>'+(r.content||"")+"</p>"),r.skin&&(r.anim="up"),"msg"===r.skin&&(r.shade=!1),a.innerHTML=(r.shade?"<div "+("string"==typeof r.shade?'style="'+r.shade+'"':"")+' class="layui-m-layershade"></div>':"")+'<div class="layui-m-layermain" '+(r.fixed?"":'style="position:static;"')+'><div class="layui-m-layersection"><div class="layui-m-layerchild '+(r.skin?"layui-m-layer-"+r.skin+" ":"")+(r.className?r.className:"")+" "+(r.anim?"layui-m-anim-"+r.anim:"")+'" '+(r.style?'style="'+r.style+'"':"")+">"+c+'<div class="layui-m-layercont">'+r.content+"</div>"+d+"</div></div></div>",!r.type||2===r.type){var l=t[n](s[0]+r.type);l.length>=1&&layer.close(l[0].getAttribute("index"))}document.body.appendChild(a);var u=e.elem=i("#"+e.id)[0];r.success&&r.success(u),e.index=o++,e.action(r,u)},c.prototype.action=function(e,t){var i=this;e.time&&(a.timer[i.index]=setTimeout(function(){layer.close(i.index)},1e3*e.time));var r=function(){0==this.getAttribute("type")?(e.no&&e.no(),layer.close(i.index)):e.yes?e.yes(i.index):layer.close(i.index)};if(e.btn)for(var o=t[n]("layui-m-layerbtn")[0].children,s=o.length,c=0;c<s;c++)a.touch(o[c],r);if(e.shade&&e.shadeClose){var d=t[n]("layui-m-layershade")[0];a.touch(d,function(){layer.close(i.index,e.end)})}e.end&&(a.end[i.index]=e.end)},e.layer={v:"2.0",index:o,open:function(e){return new c(e||{}).index},close:function(e){var n=i("#"+s[0]+e)[0];n&&(n.innerHTML="",t.body.removeChild(n),clearTimeout(a.timer[e]),delete a.timer[e],"function"==typeof a.end[e]&&a.end[e](),delete a.end[e])},closeAll:function(){for(var e=t[n](s[0]),i=0,r=e.length;i<r;i++)layer.close(0|e[0].getAttribute("index"))}},"function"==typeof define?define(function(){return layer}):function(){var e=document.scripts,t=e[e.length-1],n=t.src;n.substring(0,n.lastIndexOf("/")+1);t.getAttribute("merge")}()}(window);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window.LArea=function(){var e=function(){this.gearArea,this.data,this.index=0,this.value=[0,0,0]};return e.prototype={init:function(e){switch(this.params=e,this.trigger=document.querySelector(e.trigger),e.valueTo&&(this.valueTo=document.querySelector(e.valueTo)),this.keys=e.keys,this.type=e.type||1,this.type){case 1:case 2:break;default:throw new Error("错误提示: 没有这种数据源类型")}this.bindEvent()},getData:function(e){var t=this;if("object"==_typeof(t.params.data))t.data=t.params.data,e();else{var n=new XMLHttpRequest;n.open("get",t.params.data),n.onload=function(i){if(n.status>=200&&n.status<300||0===n.status){var r=JSON.parse(n.responseText);t.data=r.data,e&&e()}},n.send()}},bindEvent:function(){function e(e){s.gearArea=document.createElement("div"),s.gearArea.className="gearArea",s.gearArea.innerHTML='<div class="area_ctrl slideInUp"><div class="area_btn_box"><div class="area_btn larea_cancel">取消</div><div class="area_btn larea_finish">确定</div></div><div class="area_roll_mask"><div class="area_roll"><div><div class="gear area_province" data-areatype="area_province"></div><div class="area_grid"></div></div><div><div class="gear area_city" data-areatype="area_city"></div><div class="area_grid"></div></div><div><div class="gear area_county" data-areatype="area_county"></div><div class="area_grid"></div></div></div></div></div>',document.body.appendChild(s.gearArea),t(),s.gearArea.querySelector(".larea_cancel").addEventListener("touchstart",function(e){s.close(e)}),s.gearArea.querySelector(".larea_finish").addEventListener("touchstart",function(e){s.finish(e)});var a=s.gearArea.querySelector(".area_province"),o=s.gearArea.querySelector(".area_city"),c=s.gearArea.querySelector(".area_county");a.addEventListener("touchstart",n),o.addEventListener("touchstart",n),c.addEventListener("touchstart",n),a.addEventListener("touchmove",i),o.addEventListener("touchmove",i),c.addEventListener("touchmove",i),a.addEventListener("touchend",r),o.addEventListener("touchend",r),c.addEventListener("touchend",r),document.body.addEventListener("touchmove",handler,!1),document.body.addEventListener("wheel",handler,!1)}function t(){switch(s.gearArea.querySelector(".area_province").setAttribute("val",s.value[0]),s.gearArea.querySelector(".area_city").setAttribute("val",s.value[1]),s.gearArea.querySelector(".area_county").setAttribute("val",s.value[2]),s.type){case 1:s.setGearTooth(s.data);break;case 2:s.setGearTooth(s.data[0])}}function n(e){e.preventDefault();for(var t=e.target;;){if(t.classList.contains("gear"))break;t=t.parentElement}clearInterval(t["int_"+t.id]),t["old_"+t.id]=e.targetTouches[0].screenY,t["o_t_"+t.id]=(new Date).getTime();var n=t.getAttribute("top");t["o_d_"+t.id]=n?parseFloat(n.replace(/em/g,"")):0,t.style.webkitTransitionDuration=t.style.transitionDuration="0ms"}function i(e){e.preventDefault();for(var t=e.target;;){if(t.classList.contains("gear"))break;t=t.parentElement}t["new_"+t.id]=e.targetTouches[0].screenY,t["n_t_"+t.id]=(new Date).getTime();var n=30*(t["new_"+t.id]-t["old_"+t.id])/window.innerHeight;t["pos_"+t.id]=t["o_d_"+t.id]+n,t.style["-webkit-transform"]="translate3d(0,"+t["pos_"+t.id]+"em,0)",t.setAttribute("top",t["pos_"+t.id]+"em"),e.targetTouches[0].screenY<1&&r(e)}function r(e){e.preventDefault();for(var t=e.target;;){if(t.classList.contains("gear"))break;t=t.parentElement}var n=(t["new_"+t.id]-t["old_"+t.id])/(t["n_t_"+t.id]-t["o_t_"+t.id]);Math.abs(n)<=.2?t["spd_"+t.id]=n<0?-.08:.08:Math.abs(n)<=.5?t["spd_"+t.id]=n<0?-.16:.16:t["spd_"+t.id]=n/2,t["pos_"+t.id]||(t["pos_"+t.id]=0),a(t)}function a(e){function t(){e.style.webkitTransitionDuration=e.style.transitionDuration="200ms",i=!0}var n=0,i=!1;clearInterval(e["int_"+e.id]),e["int_"+e.id]=setInterval(function(){var r=e["pos_"+e.id],a=e["spd_"+e.id]*Math.exp(-.03*n);if(r+=a,Math.abs(a)>.1);else{r=2*Math.round(r/2),t()}r>0&&(r=0,t());var s=2*-(e.dataset.len-1);if(r<s&&(r=s,t()),i){var c=Math.abs(r)/2;o(e,c),clearInterval(e["int_"+e.id])}e["pos_"+e.id]=r,e.style["-webkit-transform"]="translate3d(0,"+r+"em,0)",e.setAttribute("top",r+"em"),n++},30)}function o(e,t){switch(t=Math.round(t),e.setAttribute("val",t),s.type){case 1:s.setGearTooth(s.data);break;case 2:switch(e.dataset.areatype){case"area_province":s.setGearTooth(s.data[0]);break;case"area_city":var n=e.childNodes[t].getAttribute("ref"),i=[],r=s.data[2];for(var a in r)if(a==n){i=r[a];break}s.index=2,s.setGearTooth(i)}}}var s=this;s.getData(function(){s.trigger.addEventListener("click",e)})},setGearTooth:function(e){var t=this,n=e||[],i=n.length,r=t.gearArea.querySelectorAll(".gear"),a=r[t.index].getAttribute("val"),o=i-1;if(a>o&&(a=o),r[t.index].setAttribute("data-len",i),i>0){var s,c=n[a][this.keys.id];switch(t.type){case 1:s=n[a].child;break;case 2:var d=t.data[t.index+1];for(var l in d)if(l==c){s=d[l];break}}for(var u="",l=0;l<i;l++)u+="<div class='tooth'  ref='"+n[l][this.keys.id]+"'>"+n[l][this.keys.name]+"</div>";if(r[t.index].innerHTML=u,r[t.index].style["-webkit-transform"]="translate3d(0,"+2*-a+"em,0)",r[t.index].setAttribute("top",2*-a+"em"),r[t.index].setAttribute("val",a),++t.index>2)return void(t.index=0);t.setGearTooth(s)}else r[t.index].innerHTML="<div class='tooth'></div>",r[t.index].setAttribute("val",0),1==t.index&&(r[2].innerHTML="<div class='tooth'></div>",r[2].setAttribute("val",0)),t.index=0},finish:function(e){var t=this,n=t.gearArea.querySelector(".area_province"),i=t.gearArea.querySelector(".area_city"),r=t.gearArea.querySelector(".area_county"),a=parseInt(n.getAttribute("val")),o=n.childNodes[a].textContent,s=n.childNodes[a].getAttribute("ref"),c=parseInt(i.getAttribute("val")),d=i.childNodes[c].textContent,l=i.childNodes[c].getAttribute("ref"),u=parseInt(r.getAttribute("val")),p=r.childNodes[u].textContent,f=r.childNodes[u].getAttribute("ref");t.trigger.value=o+(d?" "+d:"")+(p?" "+p:""),t.value=[a,c,u],this.valueTo&&(this.valueTo.value=s+(l?","+l:"")+(f?","+f:"")),t.close(e)},close:function(e){e.preventDefault();var t=this,n=new CustomEvent("input");t.trigger.dispatchEvent(n),document.body.removeChild(t.gearArea),document.body.removeEventListener("touchmove",handler,!1),document.body.removeEventListener("wheel",handler,!1)},handler:function(){event.preventDefault(),event.stopPropagation()}},e}();var loading1=null,str="",mapObj={},areaArr=[];$(function(){FastClick.attach(document.body);var e=window.location.href,t=GetQueryString("fromUrl"),n=document.referrer,i=n||t;getWxConfig(e,i),$("#getcode").on("click",function(){repTel()&&$ajax("/free/getSmsCode",{phone:$("#tel").val(),type:3},function(e){"1"===e.status?($("#getcode").attr("disabled","true").text("30s").addClass("get"),count(),layer.open({content:"验证码已发送，请注意查收",skin:"msg",time:2})):layer.open({content:e.errorMsg,skin:"msg",time:2})},function(e){layer.open({content:e.message,skin:"msg",time:2})})}),$(".m-popup-wrapper").on("click",function(){event.target==this&&hidden($(".res-suc"),function(e,t){$(".m-popup-wrapper").hide(),$(".res-suc").removeClass("fadeOutDown fadeInUp"),$(".res-suc")[0].removeEventListener(e,t,!1),document.body.removeEventListener("touchmove",handler,!1),document.body.removeEventListener("wheel",handler,!1)})}),$("#sub").on("click",function(){if(!repTel())return!1;var e=$("#code").val(),t=/^\d{4}$/;return""===e?(layer.open({content:"验证码不能为空",skin:"msg",time:2}),!1):t.test(e)?void $ajax("/free/saveFree",{smsCode:e,phone:$("#tel").val(),spuId:215,shareUserId:0,areaId:320104,type:3},function(e){"1"===e.status?($("#suc-pic").attr("src",e.result.picUrl),$("#suc-tit").text(e.result.title),$("#suc-use").attr("href",e.result.appUrl),$(".m-popup-wrapper").show(),$(".m-popup").removeClass("fadeOutDown fadeInUp").addClass("fadeInUp"),document.body.addEventListener("touchmove",handler,!1),document.body.addEventListener("wheel",handler,!1)):layer.open({content:e.errorMsg,skin:"msg",time:2})},function(e){layer.open({content:e.message,skin:"msg",time:2})}):(layer.open({content:"验证码错误",skin:"msg",time:2}),!1)})});