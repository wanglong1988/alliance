"use strict";function wxShareConfig(e,t,n,a){wx.config({debug:!1,appId:e,timestamp:t,nonceStr:n,signature:a,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareQZone"]}),wx.error(function(e){})}function wxShareReady(e,t,n,a){wx.ready(function(){wx.onMenuShareTimeline({title:t,link:e,imgUrl:a,success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:t,desc:n,link:e,imgUrl:a,type:"link",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareQQ({title:t,desc:n,link:e,imgUrl:a,success:function(){},cancel:function(){}}),wx.onMenuShareQZone({title:t,desc:n,link:e,imgUrl:a,success:function(){},cancel:function(){}}),wx.onMenuShareWeibo({title:t,desc:n,link:e,imgUrl:a,success:function(){},cancel:function(){}})})}function GetQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t),a="";return null!=n&&(a=n[2]),t=null,n=null,null==a||""==a||"undefined"==a?"":a}function $ajax(e,t,n,a){e=config.host+e;var r=arguments[2]?arguments[2]:function(){},i=arguments[3]?arguments[3]:function(){};$.ajax({url:e,type:"POST",dataType:"json",data:t,success:function(e){r(e)},error:function(e){i(e)}})}function getAjaxPromise(e){return new Promise(function(t,n){$.ajax({url:e.url,type:"post",data:e.data||"",success:function(e){t(e)},error:function(e){n(e)}})})}function GetQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t),a="";return null!=n&&(a=n[2]),t=null,n=null,null==a||""==a||"undefined"==a?"":a}function repTel(){var e=/^1[3|4|5|7|8][0-9]\d{8}$/,t=$("#tel").val();return""===t?(layer.open({content:"手机号不能为空",skin:"msg",time:2}),!1):(e.test(t)||layer.open({content:"手机号错误",skin:"msg",time:2}),e.test(t))}function addZero(e){return e<10?"0"+e:e}function count(){var e=$("#getcode").text(),t=parseInt(e),n=setInterval(function(){if(t<=0)return clearInterval(n),void $("#getcode").removeAttr("disabled").text("验证码").removeClass("get");t--,$("#getcode").text(addZero(t)+"s").addClass("get")},1e3)}function prefix(){var e=getCompStyle(document.documentElement),t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||["","o"])[1];return{dom:"WebKit|Moz|MS|O".match(new RegExp("("+t+")","i"))[1],lowercase:t,css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)}}function getCompStyle(e,t){return(window.getComputedStyle?window.getComputedStyle(e,t||null):e.currentStyle)||null}function handler(){event.preventDefault(),event.stopPropagation()}function hidden(e,t){e.removeClass("fadeInUp fadeOutDown").addClass("fadeOutDown");var n={webkit:"webkitAnimationEnd",o:"oAnimationEnd",ms:"MSAnimationEnd",animation:"animationend"},a=n[prefix().lowercase]||n.animation;a&&e[0].addEventListener(a,function e(){t&&t(a,e)})}function getWxConfig(e,t){$ajax("/free/getWeChatInfo",{url:e},function(e){if("1"===e.status){var n=e.result;wxShareConfig(n.appId,n.timestamp,n.nonceStr,n.signature),wxShareReady(t,config.shareTitle,config.shareContent,config.shareLogo)}})}var config={host:"http://activity-server.test.sanqimei.com",timeout:5e3,shareLogo:"http://static.sanqimei.com/web/webapp/icon/show.png",shareTitle:"双重福利免费领",shareContent:"凤凰机器人联合37美放大招！双重福利免费领！"},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t=document,n="getElementsByClassName",a=function(e){return t.querySelectorAll(e)},r={type:0,shade:!0,shadeClose:!0,fixed:!0,anim:"scale"},i={extend:function(e){var t=JSON.parse(JSON.stringify(r));for(var n in e)t[n]=e[n];return t},timer:{},end:{}};i.touch=function(e,t){e.addEventListener("click",function(e){t.call(this,e)},!1)};var o=0,s=["layui-m-layer"],c=function(e){var t=this;t.config=i.extend(e),t.view()};c.prototype.view=function(){var e=this,r=e.config,i=t.createElement("div");e.id=i.id=s[0]+o,i.setAttribute("class",s[0]+" "+s[0]+(r.type||0)),i.setAttribute("index",o);var c=function(){var e="object"===_typeof(r.title);return r.title?'<h3 style="'+(e?r.title[1]:"")+'">'+(e?r.title[0]:r.title)+"</h3>":""}(),d=function(){"string"==typeof r.btn&&(r.btn=[r.btn]);var e,t=(r.btn||[]).length;return 0!==t&&r.btn?(e='<span yes type="1">'+r.btn[0]+"</span>",2===t&&(e='<span no type="0">'+r.btn[1]+"</span>"+e),'<div class="layui-m-layerbtn">'+e+"</div>"):""}();if(r.fixed||(r.top=r.hasOwnProperty("top")?r.top:100,r.style=r.style||"",r.style+=" top:"+(t.body.scrollTop+r.top)+"px"),2===r.type&&(r.content='<i></i><i class="layui-m-layerload"></i><i></i><p>'+(r.content||"")+"</p>"),r.skin&&(r.anim="up"),"msg"===r.skin&&(r.shade=!1),i.innerHTML=(r.shade?"<div "+("string"==typeof r.shade?'style="'+r.shade+'"':"")+' class="layui-m-layershade"></div>':"")+'<div class="layui-m-layermain" '+(r.fixed?"":'style="position:static;"')+'><div class="layui-m-layersection"><div class="layui-m-layerchild '+(r.skin?"layui-m-layer-"+r.skin+" ":"")+(r.className?r.className:"")+" "+(r.anim?"layui-m-anim-"+r.anim:"")+'" '+(r.style?'style="'+r.style+'"':"")+">"+c+'<div class="layui-m-layercont">'+r.content+"</div>"+d+"</div></div></div>",!r.type||2===r.type){var l=t[n](s[0]+r.type);l.length>=1&&layer.close(l[0].getAttribute("index"))}document.body.appendChild(i);var u=e.elem=a("#"+e.id)[0];r.success&&r.success(u),e.index=o++,e.action(r,u)},c.prototype.action=function(e,t){var a=this;e.time&&(i.timer[a.index]=setTimeout(function(){layer.close(a.index)},1e3*e.time));var r=function(){0==this.getAttribute("type")?(e.no&&e.no(),layer.close(a.index)):e.yes?e.yes(a.index):layer.close(a.index)};if(e.btn)for(var o=t[n]("layui-m-layerbtn")[0].children,s=o.length,c=0;c<s;c++)i.touch(o[c],r);if(e.shade&&e.shadeClose){var d=t[n]("layui-m-layershade")[0];i.touch(d,function(){layer.close(a.index,e.end)})}e.end&&(i.end[a.index]=e.end)},e.layer={v:"2.0",index:o,open:function(e){return new c(e||{}).index},close:function(e){var n=a("#"+s[0]+e)[0];n&&(n.innerHTML="",t.body.removeChild(n),clearTimeout(i.timer[e]),delete i.timer[e],"function"==typeof i.end[e]&&i.end[e](),delete i.end[e])},closeAll:function(){for(var e=t[n](s[0]),a=0,r=e.length;a<r;a++)layer.close(0|e[0].getAttribute("index"))}},"function"==typeof define?define(function(){return layer}):function(){var e=document.scripts,t=e[e.length-1],n=t.src;n.substring(0,n.lastIndexOf("/")+1);t.getAttribute("merge")}()}(window);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window.LArea=function(){var e=function(){this.gearArea,this.data,this.index=0,this.value=[0,0,0]};return e.prototype={init:function(e){switch(this.params=e,this.trigger=document.querySelector(e.trigger),e.valueTo&&(this.valueTo=document.querySelector(e.valueTo)),this.keys=e.keys,this.type=e.type||1,this.type){case 1:case 2:break;default:throw new Error("错误提示: 没有这种数据源类型")}this.bindEvent()},getData:function(e){var t=this;if("object"==_typeof(t.params.data))t.data=t.params.data,e();else{var n=new XMLHttpRequest;n.open("get",t.params.data),n.onload=function(a){if(n.status>=200&&n.status<300||0===n.status){var r=JSON.parse(n.responseText);t.data=r.data,e&&e()}},n.send()}},bindEvent:function(){function e(e){s.gearArea=document.createElement("div"),s.gearArea.className="gearArea",s.gearArea.innerHTML='<div class="area_ctrl slideInUp"><div class="area_btn_box"><div class="area_btn larea_cancel">取消</div><div class="area_btn larea_finish">确定</div></div><div class="area_roll_mask"><div class="area_roll"><div><div class="gear area_province" data-areatype="area_province"></div><div class="area_grid"></div></div><div><div class="gear area_city" data-areatype="area_city"></div><div class="area_grid"></div></div><div><div class="gear area_county" data-areatype="area_county"></div><div class="area_grid"></div></div></div></div></div>',document.body.appendChild(s.gearArea),t(),s.gearArea.querySelector(".larea_cancel").addEventListener("touchstart",function(e){s.close(e)}),s.gearArea.querySelector(".larea_finish").addEventListener("touchstart",function(e){s.finish(e)});var i=s.gearArea.querySelector(".area_province"),o=s.gearArea.querySelector(".area_city"),c=s.gearArea.querySelector(".area_county");i.addEventListener("touchstart",n),o.addEventListener("touchstart",n),c.addEventListener("touchstart",n),i.addEventListener("touchmove",a),o.addEventListener("touchmove",a),c.addEventListener("touchmove",a),i.addEventListener("touchend",r),o.addEventListener("touchend",r),c.addEventListener("touchend",r),document.body.addEventListener("touchmove",handler,!1),document.body.addEventListener("wheel",handler,!1)}function t(){switch(s.gearArea.querySelector(".area_province").setAttribute("val",s.value[0]),s.gearArea.querySelector(".area_city").setAttribute("val",s.value[1]),s.gearArea.querySelector(".area_county").setAttribute("val",s.value[2]),s.type){case 1:s.setGearTooth(s.data);break;case 2:s.setGearTooth(s.data[0])}}function n(e){e.preventDefault();for(var t=e.target;;){if(t.classList.contains("gear"))break;t=t.parentElement}clearInterval(t["int_"+t.id]),t["old_"+t.id]=e.targetTouches[0].screenY,t["o_t_"+t.id]=(new Date).getTime();var n=t.getAttribute("top");t["o_d_"+t.id]=n?parseFloat(n.replace(/em/g,"")):0,t.style.webkitTransitionDuration=t.style.transitionDuration="0ms"}function a(e){e.preventDefault();for(var t=e.target;;){if(t.classList.contains("gear"))break;t=t.parentElement}t["new_"+t.id]=e.targetTouches[0].screenY,t["n_t_"+t.id]=(new Date).getTime();var n=30*(t["new_"+t.id]-t["old_"+t.id])/window.innerHeight;t["pos_"+t.id]=t["o_d_"+t.id]+n,t.style["-webkit-transform"]="translate3d(0,"+t["pos_"+t.id]+"em,0)",t.setAttribute("top",t["pos_"+t.id]+"em"),e.targetTouches[0].screenY<1&&r(e)}function r(e){e.preventDefault();for(var t=e.target;;){if(t.classList.contains("gear"))break;t=t.parentElement}var n=(t["new_"+t.id]-t["old_"+t.id])/(t["n_t_"+t.id]-t["o_t_"+t.id]);Math.abs(n)<=.2?t["spd_"+t.id]=n<0?-.08:.08:Math.abs(n)<=.5?t["spd_"+t.id]=n<0?-.16:.16:t["spd_"+t.id]=n/2,t["pos_"+t.id]||(t["pos_"+t.id]=0),i(t)}function i(e){function t(){e.style.webkitTransitionDuration=e.style.transitionDuration="200ms",a=!0}var n=0,a=!1;clearInterval(e["int_"+e.id]),e["int_"+e.id]=setInterval(function(){var r=e["pos_"+e.id],i=e["spd_"+e.id]*Math.exp(-.03*n);if(r+=i,Math.abs(i)>.1);else{r=2*Math.round(r/2),t()}r>0&&(r=0,t());var s=2*-(e.dataset.len-1);if(r<s&&(r=s,t()),a){var c=Math.abs(r)/2;o(e,c),clearInterval(e["int_"+e.id])}e["pos_"+e.id]=r,e.style["-webkit-transform"]="translate3d(0,"+r+"em,0)",e.setAttribute("top",r+"em"),n++},30)}function o(e,t){switch(t=Math.round(t),e.setAttribute("val",t),s.type){case 1:s.setGearTooth(s.data);break;case 2:switch(e.dataset.areatype){case"area_province":s.setGearTooth(s.data[0]);break;case"area_city":var n=e.childNodes[t].getAttribute("ref"),a=[],r=s.data[2];for(var i in r)if(i==n){a=r[i];break}s.index=2,s.setGearTooth(a)}}}var s=this;s.getData(function(){s.trigger.addEventListener("click",e)})},setGearTooth:function(e){var t=this,n=e||[],a=n.length,r=t.gearArea.querySelectorAll(".gear"),i=r[t.index].getAttribute("val"),o=a-1;if(i>o&&(i=o),r[t.index].setAttribute("data-len",a),a>0){var s,c=n[i][this.keys.id];switch(t.type){case 1:s=n[i].child;break;case 2:var d=t.data[t.index+1];for(var l in d)if(l==c){s=d[l];break}}for(var u="",l=0;l<a;l++)u+="<div class='tooth'  ref='"+n[l][this.keys.id]+"'>"+n[l][this.keys.name]+"</div>";if(r[t.index].innerHTML=u,r[t.index].style["-webkit-transform"]="translate3d(0,"+2*-i+"em,0)",r[t.index].setAttribute("top",2*-i+"em"),r[t.index].setAttribute("val",i),++t.index>2)return void(t.index=0);t.setGearTooth(s)}else r[t.index].innerHTML="<div class='tooth'></div>",r[t.index].setAttribute("val",0),1==t.index&&(r[2].innerHTML="<div class='tooth'></div>",r[2].setAttribute("val",0)),t.index=0},finish:function(e){var t=this,n=t.gearArea.querySelector(".area_province"),a=t.gearArea.querySelector(".area_city"),r=t.gearArea.querySelector(".area_county"),i=parseInt(n.getAttribute("val")),o=n.childNodes[i].textContent,s=n.childNodes[i].getAttribute("ref"),c=parseInt(a.getAttribute("val")),d=a.childNodes[c].textContent,l=a.childNodes[c].getAttribute("ref"),u=parseInt(r.getAttribute("val")),v=r.childNodes[u].textContent,p=r.childNodes[u].getAttribute("ref");t.trigger.value=o+(d?" "+d:"")+(v?" "+v:""),t.value=[i,c,u],this.valueTo&&(this.valueTo.value=s+(l?","+l:"")+(p?","+p:"")),t.close(e)},close:function(e){e.preventDefault();var t=this,n=new CustomEvent("input");t.trigger.dispatchEvent(n),document.body.removeChild(t.gearArea),document.body.removeEventListener("touchmove",handler,!1),document.body.removeEventListener("wheel",handler,!1)},handler:function(){event.preventDefault(),event.stopPropagation()}},e}();var loading1=null,str="",mapObj={},areaArr=[];$(function(){FastClick.attach(document.body);var e=window.location.href,t=GetQueryString("fromUrl"),n=document.referrer,a=n||t;getWxConfig(e,a),$("#getcode").on("click",function(){repTel()&&$ajax("/free/getSmsCode",{phone:$("#tel").val(),type:3},function(e){"1"===e.status?($("#getcode").attr("disabled","true").text("30s").addClass("get"),count(),layer.open({content:"验证码已发送，请注意查收",skin:"msg",time:2})):layer.open({content:e.errorMsg,skin:"msg",time:2})},function(e){layer.open({content:e.message,skin:"msg",time:2})})}),$(".m-popup-wrapper").on("click",function(){event.target==this&&hidden($(".res-suc"),function(e,t){$(".m-popup-wrapper").hide(),$(".res-suc").removeClass("fadeOutDown fadeInUp"),$(".res-suc")[0].removeEventListener(e,t,!1),document.body.removeEventListener("touchmove",handler,!1),document.body.removeEventListener("wheel",handler,!1)})}),$("#sub").on("click",function(){if(!repTel())return!1;var e=$("#code").val(),t=/^\d{4}$/;return""===e?(layer.open({content:"验证码不能为空",skin:"msg",time:2}),!1):t.test(e)?void $ajax("/statistics/getActivityFhNum",{type:3},function(t){"1"===t.status?($ajax("/free/saveFree",{smsCode:e,phone:$("#tel").val(),spuId:100,shareUserId:0,areaId:320104,type:3},function(e){"1"===e.status?($("#suc-pic").attr("src",e.result.picUrl),$("#suc-tit").text(e.result.title),$("#suc-use").attr("href",e.result.appUrl),$(".m-popup-wrapper").show(),$(".m-popup").removeClass("fadeOutDown fadeInUp").addClass("fadeInUp"),document.body.addEventListener("touchmove",handler,!1),document.body.addEventListener("wheel",handler,!1)):layer.open({content:e.errorMsg,skin:"msg",time:2})},function(e){layer.open({content:e.message,skin:"msg",time:2})}),layer.close(layer.open({type:2}))):(layer.close(layer.open({type:2})),layer.open({content:t.errorMsg,skin:"msg",time:2}))},function(e){layer.open({content:e.message,skin:"msg",time:2})}):(layer.open({content:"验证码错误",skin:"msg",time:2}),!1)})});